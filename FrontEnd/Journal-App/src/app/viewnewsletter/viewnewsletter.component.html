<div *ngIf="newsletter; else loading">
  <div class="card">
    <div [style.background-color]="newsletter.backgroundColor" [style.text-align]="newsletter.textAlign">
      <h1>{{ newsletter.title }}</h1>
      <h2>{{ newsletter.subtitle }}</h2>
      <p>Publication Date: {{ newsletter.publicationDate | date:"MM/dd/yyyy" }}</p>

      <!-- Section pour les articles ajoutés -->
      <div class="section-article">
        <div class="article-card" *ngFor="let article of addedArticles">
          <h3>{{ article.title }}</h3>
          <p>{{ article.content }}</p>
          <button class="delete-btn" (click)="deleteArticle(article)">Supprimer</button>
        </div>
      </div>

      <!-- Bouton pour afficher les articles disponibles -->
      <button (click)="toggleArticleList()">Ajouter un article</button>

      <!-- Liste des articles disponibles -->
      <div *ngIf="showArticleList" class="article-list">
        <div class="article-item" *ngFor="let article of validArticles">
          <span>{{ article.title }}</span>
          <button class="add-btn" (click)="addArticleToNewsletter(article)">+</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Confirmation Modal -->
<div *ngIf="articleToConfirm" class="confirmation-modal">
  <div class="modal-content">
    <p>
      L'article "<strong>{{ articleToConfirm.title }}</strong>" est déjà associé à la newsletter
      "<strong>{{ articleToConfirm.newsletter?.title }}</strong>".
      Voulez-vous le lier à cette newsletter à la place ?
    </p>
    <button (click)="confirmAddArticle(articleToConfirm)">Confirmer le changement</button>
    <button (click)="cancelAddArticle()">Annuler</button>
  </div>
</div>

<ng-template #loading>
  <div class="card">
    <p>Loading...</p>
  </div>
</ng-template>
