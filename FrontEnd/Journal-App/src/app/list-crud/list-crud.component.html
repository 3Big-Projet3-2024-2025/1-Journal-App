<!-- Conteneur principal -->
<div class="container mt-4">
  <h2>{{ titre }}</h2>

  <!-- Bouton d'ajout : visible uniquement pour les articles et newsletters -->
  <button
    *ngIf="titretable !== 'comments'"
    class="btn btn-primary mb-3"
    [routerLink]="
      titretable === 'articles'
        ? '/add-article'
        : titretable === 'newsletters'
        ? '/manage-newsletter-form'
        : '/manage-default'
    "
  >
    {{
      titretable === 'articles'
        ? 'Add an Article'
        : titretable === 'newsletters'
        ? 'Add a Newsletter'
        : 'Add an Item'
    }}
  </button>

  <!-- Section Articles -->
  <div *ngIf="titretable === 'articles'">
    <h3>Valid Articles</h3>
    <table
      class="table table-striped"
      *ngIf="validArticles.length > 0; else noValidArticles"
    >
      <thead>
        <tr>
          <th>#</th>
          <th>Title</th>
          <th>Publication Date</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let article of validArticles; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ article.title }}</td>
          <td>{{ article.publicationDate }}</td>
          <td>
            <button
              class="btn btn-warning btn-sm"
              [routerLink]="['/update-article', article.articleId]"
            >
              Edit
            </button>
            <button
              class="btn btn-danger btn-sm"
              (click)="confirmDelete(article.articleId, 'article')"
            >
              Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
    <ng-template #noValidArticles>
      <p>No valid articles available.</p>
    </ng-template>

    <h3>Non-Valid Articles</h3>
    <table
      class="table table-striped"
      *ngIf="nonValidArticles.length > 0; else noNonValidArticles"
    >
      <thead>
        <tr>
          <th>#</th>
          <th>Title</th>
          <th>Publication Date</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let article of nonValidArticles; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ article.title }}</td>
          <td>{{ article.publicationDate }}</td>
          <td>
            <button
              class="btn btn-warning btn-sm"
              [routerLink]="['/update-article', article.articleId]"
            >
              Edit
            </button>
            <button
              class="btn btn-success btn-sm"
              (click)="validateArticle(article)"
            >
              Validate
            </button>
            <button
              class="btn btn-danger btn-sm"
              (click)="confirmDelete(article.articleId, 'article')"
            >
              Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
    <ng-template #noNonValidArticles>
      <p>No non-valid articles available.</p>
    </ng-template>
  </div>

  <!-- Section Newsletters -->
  <div *ngIf="titretable === 'newsletters'">
    <h3>Newsletters</h3>
    <table
      class="table table-striped"
      *ngIf="newsletters.length > 0; else noNewsletters"
    >
      <thead>
        <tr>
          <th>#</th>
          <th>Title</th>
          <th>Publication Date</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let newsletter of newsletters; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ newsletter.title }}</td>
          <td>{{ newsletter.publicationDate }}</td>
          <td>
            <button
              class="btn btn-warning btn-sm"
              [routerLink]="['/update-newsletter', newsletter.newsletterId]"
            >
              Edit
            </button>
            <button
              class="btn btn-danger btn-sm"
              (click)="confirmDelete(newsletter.newsletterId, 'newsletter')"
            >
              Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
    <ng-template #noNewsletters>
      <p>No newsletters available.</p>
    </ng-template>
  </div>

  <!-- Section Comments -->
  <div *ngIf="titretable === 'comments'">
    <h3>Comments</h3>
    <table
      class="table table-striped"
      *ngIf="comments.length > 0; else noComments"
    >
      <thead>
        <tr>
          <th>#</th>
          <th>ID</th>
          <th>Author</th>
          <th>Content</th>
          <th>Date</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let comment of comments; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ comment.commentId }}</td>
          <td>{{ comment.user.email }}</td>
          <td>{{ comment.content }}</td>
          <td>{{ comment.publicationDate }}</td>
          <td>
            <button
              class="btn btn-danger btn-sm"
              (click)="confirmDelete(comment.commentId, 'comment')"
            >
              Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
    <ng-template #noComments>
      <p>No comments available.</p>
    </ng-template>
  </div>
</div>
